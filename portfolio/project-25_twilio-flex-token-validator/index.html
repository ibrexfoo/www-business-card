<!doctype html><html lang=en-us><head><meta charset=utf-8><title></title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Flex JWE Token Validator"><meta name=author content="Rex the Tech"><meta name=generator content="Hugo 0.101.0"><link rel=preconnect href=https://fonts.gstatic.com><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/hover/hover.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.theme.default.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/style.min.css media=screen><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/custom.min.css media=screen><link rel=apple-touch-icon sizes=76x76 href=/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon/favicon-16x16.png><link rel=manifest href=./site.webmanifest><link rel=mask-icon href=/images/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel="shortcut icon" href=https://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png type=image/x-icon><link rel=icon href="21 Whttps://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png" type=image/x-icon><meta property="og:title" content><meta property="og:description" content="Flex JWE Token Validator"><meta property="og:type" content="article"><meta property="og:url" content="https://void-xer0rex.github.io/xer0rex.com/portfolio/project-25_twilio-flex-token-validator/"><meta property="article:section" content="portfolio"></head><body><div class=preloader><img src=https://void-xer0rex.github.io/xer0rex.com/images/preloader.gif alt=preloader></div><section class="menu menu-fix" id=home><nav><div class="menu-container menu-normal"><ul class="desktop-menu list-inline mb-0 justify-content-end" id=desktop-menu><a class=mr-auto href=/xer0rex.com><img class=img-fluid width=150px src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><div class=mobile-menu><a class=menu-link><div class=mobile-menu-nav><span></span>
<span></span>
<span></span></div></a><div class=mobile-menu-logo><a href=/xer0rex.com><img class=img-fluid src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a></div><div class=menu-slider><nav><ul class=mobile-menu-list><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><ul class="mobile-menu-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul></nav></div></div></div></nav></section><div style=height:50px></div><section class=section><div class=container><div class=row><div class="col-lg-8 mb-4 mb-lg-0"><div class="wow fadeInUp" data-wow-duration=1.5s><div class="about-me-text mb-4"><h1></h1></div><div class=content><h1 align=center>Twilio Flex Token Validator</h1><p align=center>Flex JWE Token Validator provides an easy way to validate a Flex JWE token.</p><p align=center><a href=https://travis-ci.com/twilio/twilio-flex-token-validator><img src="https://travis-ci.com/twilio/twilio-flex-token-validator.svg?branch=master" title="Build Status"></a>
<a href=https://www.npmjs.com/package/twilio-flex-token-validator><img src="https://img.shields.io/npm/v/twilio-flex-token-validator.svg?style=flat-square" title=npm></a>
<a href=https://www.npmjs.com/package/twilio-flex-token-validator><img src="https://img.shields.io/npm/dt/twilio-flex-token-validator.svg?style=flat-square" title=npm></a>
<a href=./LICENSE.md><img src=https://img.shields.io/badge/license-MIT-green.svg title=License></a></p><h2 id=usage>Usage</h2><p>Install with <code>npm install twilio-flex-token-validator</code>.</p><p>You can use this validator either within a <a href=https://www.twilio.com/functions>Twilio Function</a>, or into any NodeJS application.</p><h3 id=using-in-twilio-function>Using in Twilio Function</h3><p>First visit <a href=https://www.twilio.com/console/runtime/functions/configure>Twilio Function Configuration</a> and add <code>twilio-flex-token-validator</code> as an NPM package. On the same page, enable the checkbox <code>Enable ACCOUNT_SID and AUTH_TOKEN</code>.</p><p>In your Twilio Function, wrap your main <code>handler</code> with this validator:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TokenValidator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;twilio-flex-token-validator&#39;</span>).<span style=color:#a6e22e>functionValidator</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>exports</span>.<span style=color:#a6e22e>handler</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>TokenValidator</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>context</span>, <span style=color:#a6e22e>event</span>, <span style=color:#a6e22e>callback</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Your normal Twilio Function goes here.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// This block will only be called if your token is validated, otherwise it returns a 403.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>});
</span></span></code></pre></div><p>This validator assumes that the token is provided as the <code>Token</code> key. The successful result of the token validation is added to <code>event.TokenResult</code>.</p><p>Make sure the checkbox <code>Check for valid Twilio signature</code> is <em>disabled</em>. This token validator will handle the authentication of the request instead.</p><h3 id=using-in-any-nodejs-application>Using in any NodeJS application</h3><p>You can also use this validator inside any existing Node servers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>TokenValidator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;twilio-flex-token-validator&#39;</span>).<span style=color:#a6e22e>validator</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>TokenValidator</span>(<span style=color:#a6e22e>token</span>, <span style=color:#a6e22e>accountSid</span>, <span style=color:#a6e22e>authToken</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>tokenResult</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// validated
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    })
</span></span><span style=display:flex><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>err</span> =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// validation failed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    });
</span></span></code></pre></div><h2 id=token-result>Token Result</h2><p>The validated token result will contain the following data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;valid&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;expiration&#34;</span>: <span style=color:#e6db74>&#34;2018-09-24T23:22:44.240Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;realm_user_id&#34;</span>: <span style=color:#e6db74>&#34;user@example.com&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;identity&#34;</span>: <span style=color:#e6db74>&#34;user_40example_2Dcom&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;roles&#34;</span>:[
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;agent&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;worker_sid&#34;</span>: <span style=color:#e6db74>&#34;WKxxx&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=contributing>Contributing</h2><p>Check out <a href=CONTRIBUTING.md>CONTRIBUTING</a> for more information on how to contribute to this project.</p><h2 id=license>License</h2><p>Twilio Flex Token Validator is licensed under <a href=LICENSE>MIT</a>.</p></div></div></div><div class=col-lg-4><div class="bg-white sticky-top wow fadeInUp" data-wow-duration=1.5s style=top:80px><ul class=list-unstyled><li class="media mb-4"><i class="mt-1 fas fa-calendar h2"></i><div class=ml-3><h4>Date</h4><div class=content>01 Jan, 0001</div></div></li><li class="media mb-4"><i class="mt-1 fas fa-folder h2"></i><div class=ml-3><h4>Categories</h4><div class=content></div></div></li></ul></div></div></div></div></section><footer class="footer-bg fadeInUp wow" data-wow-duration=1.5s><div class=container><div class=row><div class="footer col-lg-10 offset-lg-1"><hr><ul class="footer-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul><div class=to-top><a href=#home><i class="fa fa-chevron-up"></i></a></div><div class="credit content">Copyright © 2021 made with ❤️ by <a href=mailto:rex+portfolio@xer0rex.com>Rex T.</a></div></div></div></div></footer><script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jQuery/jquery.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/wow.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jquery.waypoints.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/shuffle/shuffle.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/jquery.magnific-popup.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/js/script.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/twilio.js/1.2.0/twilio.min.js></script></body></html>