<!doctype html><html lang=en-us><head><meta charset=utf-8><title></title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Transfer Chat/SMS Tasks in Twilio Flex"><meta name=author content="Rex the Tech"><meta name=generator content="Hugo 0.101.0"><link rel=preconnect href=https://fonts.gstatic.com><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/hover/hover.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.theme.default.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/style.min.css media=screen><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/custom.min.css media=screen><link rel=apple-touch-icon sizes=76x76 href=/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon/favicon-16x16.png><link rel=manifest href=./site.webmanifest><link rel=mask-icon href=/images/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel="shortcut icon" href=https://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png type=image/x-icon><link rel=icon href="21 Whttps://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png" type=image/x-icon><meta property="og:title" content><meta property="og:description" content="Transfer Chat/SMS Tasks in Twilio Flex"><meta property="og:type" content="article"><meta property="og:url" content="https://void-xer0rex.github.io/xer0rex.com/portfolio/project-15_plugin-chat-sms-non-destructive-transfer/"><meta property="article:section" content="portfolio"></head><body><div class=preloader><img src=https://void-xer0rex.github.io/xer0rex.com/images/preloader.gif alt=preloader></div><section class="menu menu-fix" id=home><nav><div class="menu-container menu-normal"><ul class="desktop-menu list-inline mb-0 justify-content-end" id=desktop-menu><a class=mr-auto href=/xer0rex.com><img class=img-fluid width=150px src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><div class=mobile-menu><a class=menu-link><div class=mobile-menu-nav><span></span>
<span></span>
<span></span></div></a><div class=mobile-menu-logo><a href=/xer0rex.com><img class=img-fluid src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a></div><div class=menu-slider><nav><ul class=mobile-menu-list><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><ul class="mobile-menu-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul></nav></div></div></div></nav></section><div style=height:50px></div><section class=section><div class=container><div class=row><div class="col-lg-8 mb-4 mb-lg-0"><div class="wow fadeInUp" data-wow-duration=1.5s><div class="about-me-text mb-4"><h1></h1></div><div class=content><h1 id=flex-transfer-chatsms-plugin>Flex Transfer Chat/SMS Plugin</h1><p><img src=https://indigo-bombay-5783.twil.io/assets/chat-transfer-ui.jpg alt="Chat Transfer UI"></p><p><strong>As of the writing of this document, Flex does not natively support transferring of non-voice tasks. It is on the roadmap and when its released you should migrate to that solution.</strong></p><hr><h2 id=details>Details</h2><p><strong>This plugin requires Flex v1.9 and above.</strong></p><p>This plugin will add a transfer button near the End Chat button. Clicking this button will open the default worker/queue directory. Upon selecting a Queue, this plugin will initiate a blind transfer of the chat task to the specified queue.</p><p>Because Flex does not yet support transfering Chat/SMS tasks natively, this plugin works by creating a new task and routing it through your workflow as normal. The original task is automatically completed by the provided function, and all subsequent &ldquo;transfer&rdquo; tasks are linked to the original task to be compatible with WFO reporting.</p><p>It is up to you to implement the necessary Task Router routing rules to send the task to the specified queue. To aid you in this, two new attributes will be added to your tasks: <code>ignoreAgent</code> and <code>requiredQueue</code>.</p><p>The selected queue sid will be populated in the <code>requiredQueue</code> attribute, and the agent that initiated the transfer will be added to the <code>ignoreAgent</code> attribute - this will aid you in ensuring that the last agent to transfer the task will not receive the transfer they initiated.</p><h3 id=prerequisite-function>Prerequisite Function</h3><p>There is a single function Located in <code>src/functions</code> that you are expected to implement in the <a href=https://www.twilio.com/functions>Twilio Functions Runtime</a>, or to replicate in your own backend application.</p><h5 id=required-env-variables-in-your-function>Required Env Variables in your Function</h5><p>The provided functions in their current state are looking for your TaskRouter Workspace Sid in the <code>TWILIO_WORKSPACE_SID</code> variable. Please ensure this is set in your Twilio Function configuration.</p><h5 id=required-npm-package-for-your-function-environment>Required NPM Package for your Function Environment</h5><p>This plugin uses a Twilio function to actually perform the &ldquo;transfer&rdquo; of the chat task. If you use the <a href=https://www.twilio.com/functions>Twilio Functions Runtime</a> you&rsquo;ll want to validate that the incoming requests to your function are actually coming from a Flex front-end.</p><p>This plugin will send the Flex user&rsquo;s token along with the task information to transfer, upon validating the token, it will intiate the transfer. This plugin expects that you&rsquo;ve <a href=https://www.twilio.com/console/runtime/functions/configure>configured your Twilio Functions Runtime</a> dependencies and added the <code>twilio-flex-token-validator</code> package.</p><p><img src=https://indigo-bombay-5783.twil.io/assets/twilio-function-validator.jpg alt="Twilio Token Validator Configuration"></p><hr><h2 id=run-locally>Run Locally</h2><h3 id=setup>Setup</h3><p>Make sure you have <a href=https://nodejs.org>Node.js</a> as well as <a href=https://npmjs.com><code>npm</code></a> installed.</p><p>Afterwards install the dependencies by running <code>npm install</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd plugin-chat-transfer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># If you use npm</span>
</span></span><span style=display:flex><span>npm install
</span></span></code></pre></div><h3 id=development>Development</h3><p>In order to develop locally, you can use the Webpack Dev Server by running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm start
</span></span></code></pre></div><p>This will automatically start up the Webpack Dev Server and open the browser for you. Your app will run on <code>http://localhost:8080</code>. If you want to change that you can do this by setting the <code>PORT</code> environment variable:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span> npm start
</span></span></code></pre></div><p>When you make changes to your code, the browser window will be automatically refreshed.</p><h3 id=deploy>Deploy</h3><p>Once you are happy with your plugin, you have to bundle it, in order to deply it to Twilio Flex.</p><p>Run the following command to start the bundling:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm run build
</span></span></code></pre></div><p>Afterwards, you&rsquo;ll find in your project a <code>build/</code> folder that contains a file with the name of your plugin project. For example <code>plugin-example.js</code>. Take this file and upload it into the Assets part of your Twilio Runtime.</p><p>Note: Common packages like <code>React</code>, <code>ReactDOM</code>, <code>Redux</code> and <code>ReactRedux</code> are not bundled with the build because they are treated as external dependencies so the plugin will depend on Flex which would provide them globally.</p></div></div></div><div class=col-lg-4><div class="bg-white sticky-top wow fadeInUp" data-wow-duration=1.5s style=top:80px><ul class=list-unstyled><li class="media mb-4"><i class="mt-1 fas fa-calendar h2"></i><div class=ml-3><h4>Date</h4><div class=content>01 Jan, 0001</div></div></li><li class="media mb-4"><i class="mt-1 fas fa-folder h2"></i><div class=ml-3><h4>Categories</h4><div class=content></div></div></li></ul></div></div></div></div></section><footer class="footer-bg fadeInUp wow" data-wow-duration=1.5s><div class=container><div class=row><div class="footer col-lg-10 offset-lg-1"><hr><ul class="footer-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul><div class=to-top><a href=#home><i class="fa fa-chevron-up"></i></a></div><div class="credit content">Copyright © 2021 made with ❤️ by <a href=mailto:rex+portfolio@xer0rex.com>Rex T.</a></div></div></div></div></footer><script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jQuery/jquery.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/wow.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jquery.waypoints.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/shuffle/shuffle.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/jquery.magnific-popup.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/js/script.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/twilio.js/1.2.0/twilio.min.js></script></body></html>