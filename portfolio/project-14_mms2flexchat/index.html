<!doctype html><html lang=en-us><head><meta charset=utf-8><title></title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Allows customer to send in MMS media and render within Flex Chat window"><meta name=author content="Rex the Tech"><meta name=generator content="Hugo 0.101.0"><link rel=preconnect href=https://fonts.gstatic.com><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/hover/hover.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.theme.default.min.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.css><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/style.min.css media=screen><link rel=stylesheet href=https://void-xer0rex.github.io/xer0rex.com/css/custom.min.css media=screen><link rel=apple-touch-icon sizes=76x76 href=/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon/favicon-16x16.png><link rel=manifest href=./site.webmanifest><link rel=mask-icon href=/images/favicon/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel="shortcut icon" href=https://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png type=image/x-icon><link rel=icon href="21 Whttps://void-xer0rex.github.io/xer0rex.com/images/favicon/favicon.png" type=image/x-icon><meta property="og:title" content><meta property="og:description" content="Allows customer to send in MMS media and render within Flex Chat window"><meta property="og:type" content="article"><meta property="og:url" content="https://void-xer0rex.github.io/xer0rex.com/portfolio/project-14_mms2flexchat/"><meta property="article:section" content="portfolio"></head><body><div class=preloader><img src=https://void-xer0rex.github.io/xer0rex.com/images/preloader.gif alt=preloader></div><section class="menu menu-fix" id=home><nav><div class="menu-container menu-normal"><ul class="desktop-menu list-inline mb-0 justify-content-end" id=desktop-menu><a class=mr-auto href=/xer0rex.com><img class=img-fluid width=150px src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="menu-item menu-item-transparent dark hvr-underline-from-left 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><div class=mobile-menu><a class=menu-link><div class=mobile-menu-nav><span></span>
<span></span>
<span></span></div></a><div class=mobile-menu-logo><a href=/xer0rex.com><img class=img-fluid src=https://void-xer0rex.github.io/xer0rex.com/images/logo-dark.png alt="Xer0reX | A rex portfolio"></a></div><div class=menu-slider><nav><ul class=mobile-menu-list><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/>Home</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#about>About me</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#service>Service</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#portfolio>Portfolio</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#testimonial>Testimonial</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com#contact>Contact</a></li><li class="hvr-shutter-out-vertical mobile-menu-item 1"><a href=https://void-xer0rex.github.io/xer0rex.com/blog>Blog</a></li></ul><ul class="mobile-menu-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul></nav></div></div></div></nav></section><div style=height:50px></div><section class=section><div class=container><div class=row><div class="col-lg-8 mb-4 mb-lg-0"><div class="wow fadeInUp" data-wow-duration=1.5s><div class="about-me-text mb-4"><h1></h1></div><div class=content><h1 id=mms2flexchat>mms2FlexChat</h1><p>Allows end users to send in MMS media over SMS and render within Flex Chat window.</p><p>Looking for your Flex Chat Window render MMS media into your Flex Chat UI?</p><h1 id=steps>Steps:</h1><h2 id=twilio-functions>Twilio Functions</h2><ol><li><p>mmsHandler.js: This Twilio Function will be called every time a proxy interaction occurs- by using the Proxy Callback URI- the function will check to see if a MMS exists on the SMS message sent in.</p></li><li><p>send-media-message.js: This Twilio Function is called by the Flex plugin to send the media to the recipient using the Messages API. This is because Proxy does not currently support media messages, so we have to bypass Proxy and call the Messages API directly.</p></li></ol><p>You need to upload/copy these Twilio Functions in the Twilio console and configure the following Environment Variables and Dependencies (NPM Packages) on the <a href=https://www.twilio.com/console/functions/configure>Function Configuration</a> page:</p><ul><li>Function Environment Variables<ul><li>Ensure <code>Enable ACCOUNT_SID and AUTH_TOKEN</code> is checked</li><li><strong>PROXY_SERVICE</strong><ul><li>SID of the Proxy Service your MMS and WhatsApp numbers are routed to</li><li>You can find this on the <a href=https://www.twilio.com/console/proxy>Proxy Dashboard</a></li></ul></li><li><strong>CHAT_SERVICE_SID</strong><ul><li>SID of the Programmable Chat service used in your Flex Flows</li><li>You can find this on the <a href=https://www.twilio.com/console/chat/dashboard>Programmable Chat Dashboard</a></li></ul></li><li><strong>TWILIO_WHATSAPP_NUMBER</strong><ul><li>The WhatsApp number to use when sending messages to a WhatsApp recipient</li><li>You can find this either on the <a href=https://www.twilio.com/console/sms/whatsapp/learn>WhatsApp Learn</a> page if you&rsquo;re using a test number, or the <a href=https://www.twilio.com/console/sms/whatsapp/senders>WhatsApp Senders</a> if you&rsquo;ve enabled personalized WhatsApp numbers</li></ul></li></ul></li><li>Function Dependencies (NPM Packages)<ul><li>request-promise</li><li>twilio-flex-token-validator</li></ul></li></ul><h2 id=twilio-proxy-configuration>Twilio Proxy Configuration</h2><p>Because Twilio Proxy doesn&rsquo;t support media messages natively, it&rsquo;s necessary to monitor Proxy messages to detect media messages and then update the Chat Channel message attributes with the media URL and media type. That&rsquo;s what the <code>mmsHandler</code> Function we deployed above is doing.</p><p>We now need to configure the Proxy Callback URL to point to that Function.</p><ol><li><p>Navigate to the <a href=https://www.twilio.com/console/proxy>Proxy Dashboard</a> and click on the Proxy Service used by your MMS and WhatsApp numbers</p></li><li><p>In the Callback URL field, enter the URL to the <code>mmsHandler</code> Function. You can get that URL by going to the <a href=https://www.twilio.com/console/functions/manage>Twilio Functions</a> page, selecting the <code>mmsHandler</code> Function, and clicking the Copy button next to the Path.
<img src=https://raw.githubusercontent.com/jprix/mms2FlexChat/master/screenshots/proxy-callback.png alt="image thumbnail"></p></li><li><p>Click Save at the bottom of the Proxy Configuration page once you&rsquo;ve entered the Callback URL.</p></li></ol><h2 id=twilio-flex-plugin>Twilio Flex Plugin</h2><ol><li>text/javascript: This plugin gets deployed to Flex. It will add the React code required to render a media message inside the Flex chat bubble, and enable some demonstration buttons for sending media messages from Flex. See here for deploying a Flex plugin- <a href=https://www.twilio.com/docs/flex/deploying-plugins>https://www.twilio.com/docs/flex/deploying-plugins</a></li></ol><p>Demo:
<img src=screenshots/thumbnail.png alt="image thumbnail"></p><p><img src=screenshots/modal.png alt="image modal"></p><p><img src=screenshots/sendMediaButtons.png alt="send media buttons"></p></div></div></div><div class=col-lg-4><div class="bg-white sticky-top wow fadeInUp" data-wow-duration=1.5s style=top:80px><ul class=list-unstyled><li class="media mb-4"><i class="mt-1 fas fa-calendar h2"></i><div class=ml-3><h4>Date</h4><div class=content>01 Jan, 0001</div></div></li><li class="media mb-4"><i class="mt-1 fas fa-folder h2"></i><div class=ml-3><h4>Categories</h4><div class=content></div></div></li></ul></div></div></div></div></section><footer class="footer-bg fadeInUp wow" data-wow-duration=1.5s><div class=container><div class=row><div class="footer col-lg-10 offset-lg-1"><hr><ul class="footer-icons list-inline"><li><a href=https://www.facebook.com/NPC><i class="fab fa-facebook-f"></i></a></li><li><a href=https://twitter.com/rextech><i class="fab fa-twitter"></i></a></li><li><a href=https://github.com/rbeatie><i class="fab fa-github"></i></a></li><li><a href=https://github.com/rdev0rigin><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rdev-software><i class="fab fa-linkedin"></i></a></li></ul><div class=to-top><a href=#home><i class="fa fa-chevron-up"></i></a></div><div class="credit content">Copyright © 2021 made with ❤️ by <a href=mailto:rex+portfolio@xer0rex.com>Rex T.</a></div></div></div></div></footer><script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jQuery/jquery.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/wow.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/text-animation/text-animation.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/jquery.waypoints.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/shuffle/shuffle.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/magnific-popup/jquery.magnific-popup.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/plugins/owl-carousel/owl.carousel.min.js></script>
<script src=https://void-xer0rex.github.io/xer0rex.com/js/script.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/twilio.js/1.2.0/twilio.min.js></script></body></html>